# CourseSelect 

此github项目为国科大研究生课程（高级软件工程）的课程作业，由李嘉禛和刘旭在原有选课系统样本的基础上进行更新改进完成，增添了部分功能，在完成改进的过程中，小组成员对Ruby on Rail这一web应用开发框架有了更好的认识。

## 原有功能功能：

* 多角色登陆（学生，老师，管理员）
* 学生动态选课，退课
* 老师动态增加，删除课程
* 老师对课程下的学生添加、修改成绩
* 权限控制：老师和学生只能看到自己相关课程信息

## 新增功能：

* 选课单功能
* 选课时间冲突检测功能
* 邮件通知功能

 


## 新增功能说明

* 选课单功能

>在原有的系统中，学生点击课程选择便会将课程加入到自己的已选课程中，同时需要对数据库Grades进行更新，在访客量很大时可能会造成系统压力过大。添加了选课单功能后，学生将想要选择的课程先加入选课单，在调整好所有的课程后，可以一次性提交。这样既方便学生规划自己一个学期的选课又能缓解系统压力。通过建立submit_courses这一临时表存储用户准备选择的课程，在用户确认好所有想要选择的课程后可以一次性提交，完成加入课程到已选课程。<br>

>>功能截图如下:<br>

>> <img src="/lib/screenshot1.png" width="700"> 

* 选课时间冲突检测功能

>在原有的系统中，如果先后选择存在时间冲突的课程是被允许的，这显然不符合实际要求。所以，我们增添了时间冲突检测的功能，在提交选课单给系统的时候，会将选课内的课程以及已经选择的课程进行比较，看是否存在时间上的冲突，如果不存在则能够成功提交选课单，否则系统将会提示存在选课冲突，提醒学生进行检查。<br>

>判断规则：**当上课周数存在重叠、每周上课的天次相同、一天内上课的具体时间存在重叠的情况，会提示选课时间冲突，否则不进行提示；**<br>

>将当前用户已经选择的课程和选课单中准备提交的课程都存储到一个课程数组中，采用两次循环嵌套的方法，依次将每一门课程与其他未比较过的课程进行上述判断规则的比较，若存在冲突则在用户提交课程的时候会给出提示，否则选课单中的课程可以进行提交。

* 邮件通知功能

>为了使用户在对课程进行操作后得到通知，以便用户确认自己的操作已经生效，我们增添了邮件通知功能。在老师创建新课程、删除不再开课的课程时成功的操作将会往老师注册时提供的邮箱中发送提醒邮件；在学生提交选课单、退选课程的时，成功的操作将会往学生邮箱中发送邮件；以此来让用户确认自己的操作已经生效。<br>

>产生邮件通知的情景有：
>>**当老师成功申请课程；**<br>
>>**当老师删除一门课程；**<br>
>>**当学生成功提交选课单；**<br>
>>**当学生成功退课；**<br>

>**注：由于目前没有实现每个学生的绑定邮箱的自动注册功能，所以通知邮件统一发送至ucas_student_1@163.com邮箱，若想要验证此功能正确性，可以对此邮箱进行登录，密码为:2017e8018661131,请勿擅自修改密码，谢谢合作！**


